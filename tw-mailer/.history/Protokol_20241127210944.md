### TW-Mailer Pro Version: Project Description

#### Client and Server Architecture

The TW-Mailer Pro Version follows a client-server architecture where the client sends commands to the server, and the server processes these commands and responds accordingly. The server is designed to handle multiple clients concurrently using threads. This ensures that the server can manage multiple client connections simultaneously without blocking.

**Client:**
- The client application connects to the server and sends commands such as LOGIN, SEND, LIST, READ, and DEL.
- The client waits for the server's response after each command and processes the response accordingly.

**Server:**
- The server listens for incoming client connections on a specified port.
- Upon receiving a connection, the server creates a new thread or process to handle the client's requests.
- The server processes commands from the client, interacts with the LDAP server for authentication, and manages message storage and retrieval.

#### Used Technologies and Libraries

- **Programming Language:** C++
- **Concurrency:** POSIX threads (pthreads)
- **LDAP Authentication:** OpenLDAP C-API (`libldap2-dev`)
- **Networking:** POSIX sockets
- **Data Storage:** In-memory data structures for message storage and a persistent blacklist
- **UUID Generation:** `uuid-dev` library for generating unique message IDs
- **JSON Parsing:** `nlohmann/json` library for parsing and serializing JSON data

#### Development Strategy and Needed Protocol Adaptions

1. **Concurrency:**
    - Refactor the server to handle multiple clients concurrently using threads.
    - Identify critical sections and use synchronization mechanisms to prevent race conditions.

2. **Authentication:**
    - Implement the LOGIN command to authenticate users using the FH LDAP server.
    - Allow only authenticated users to execute commands other than QUIT.
    - Limit login attempts to 3 per user and IP, and blacklist the IP for 1 minute after 3 failed attempts.

3. **Command Adaptions:**
    - Remove the ability to manually set the sender in the SEND command. Use session information instead.
    - Automatically set the username in LIST, READ, and DEL commands based on session information.

#### Used Synchronization Methods

- **Mutexes:** Mutex Lock Guards are used to protect critical sections of code from concurrent access.
- 
#### Handling of Large Messages

- **Message Storage:** Messages are stored as JSON in the mail directory, with each message in a separate file.

### Conclusion

The TW-Mailer Pro Version enhances the basic TW-Mailer project by introducing concurrency, authentication, and improved command handling. By using threads, the server can handle multiple clients simultaneously. LDAP authentication ensures secure access.